{"version":3,"sources":["../../../../../src/webgpu/api/validation/render_pass/render_pass_descriptor.spec.ts"],"names":["description","makeTestGroup","kDepthStencilFormats","kRenderableColorTextureFormats","kTextureFormatInfo","ValidationTest","F","createTexture","options","format","width","height","arrayLayerCount","mipLevelCount","sampleCount","usage","GPUTextureUsage","RENDER_ATTACHMENT","device","size","depthOrArrayLayers","getColorAttachment","texture","textureViewDescriptor","view","createView","clearValue","r","g","b","a","loadOp","storeOp","getDepthStencilAttachment","depthClearValue","depthLoadOp","depthStoreOp","stencilClearValue","stencilLoadOp","stencilStoreOp","tryRenderPass","success","descriptor","commandEncoder","createCommandEncoder","renderPass","beginRenderPass","end","expectValidationError","finish","test","desc","fn","t","colorTexture","colorAttachments","depthStencilTexture","depthStencilAttachment","paramsSubcasesOnly","u","combine","undefined","Array","fill","hasDepthStencilAttachment","params","isEmptyColorTargets","i","length","_success","paramsSimple","colorAttachmentsCount","push","colorTexture1x1A","colorTexture1x1B","colorTexture2x2","depthStencilTexture1x1","depthStencilTexture2x2","baseArrayLayer","ARRAY_LAYER_COUNT","MIP_LEVEL_COUNT","COLOR_FORMAT","DEPTH_STENCIL_FORMAT","baseTextureViewDescriptor","dimension","baseMipLevel","resolveTargetTexture","resolveTarget","multisampledColorTexture","multisampledResolveTargetTexture","colorAttachment","COPY_SRC","COPY_DST","resolveTargetTextureView","multisampledDepthStencilTexture","beginSubcases","beforeAllSubcases","selectDeviceForTextureFormatOrSkipTestCase","depthReadOnly","stencilReadOnly","setDepthLoadStoreOp","setStencilLoadStoreOp","isValid","info","depth","stencil","filter","multisample","resolve","selectDeviceOrSkipTestCase","locationA","locationB","querySet","createQuerySet","type","count","timestampWriteA","queryIndex","location","timestampWriteB","timestampWrites"],"mappings":"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","sourcesContent":["export const description = `\nrender pass descriptor validation tests.\n\nTODO: per-test descriptions, make test names more succinct\nTODO: review for completeness\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport {\n  kDepthStencilFormats,\n  kRenderableColorTextureFormats,\n  kTextureFormatInfo,\n} from '../../../capability_info.js';\nimport { ValidationTest } from '../validation_test.js';\n\nclass F extends ValidationTest {\n  createTexture(\n    options: {\n      format?: GPUTextureFormat;\n      width?: number;\n      height?: number;\n      arrayLayerCount?: number;\n      mipLevelCount?: number;\n      sampleCount?: number;\n      usage?: GPUTextureUsageFlags;\n    } = {}\n  ): GPUTexture {\n    const {\n      format = 'rgba8unorm',\n      width = 16,\n      height = 16,\n      arrayLayerCount = 1,\n      mipLevelCount = 1,\n      sampleCount = 1,\n      usage = GPUTextureUsage.RENDER_ATTACHMENT,\n    } = options;\n\n    return this.device.createTexture({\n      size: { width, height, depthOrArrayLayers: arrayLayerCount },\n      format,\n      mipLevelCount,\n      sampleCount,\n      usage,\n    });\n  }\n\n  getColorAttachment(\n    texture: GPUTexture,\n    textureViewDescriptor?: GPUTextureViewDescriptor\n  ): GPURenderPassColorAttachment {\n    const view = texture.createView(textureViewDescriptor);\n\n    return {\n      view,\n      clearValue: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 },\n      loadOp: 'clear',\n      storeOp: 'store',\n    };\n  }\n\n  getDepthStencilAttachment(\n    texture: GPUTexture,\n    textureViewDescriptor?: GPUTextureViewDescriptor\n  ): GPURenderPassDepthStencilAttachment {\n    const view = texture.createView(textureViewDescriptor);\n\n    return {\n      view,\n      depthClearValue: 1.0,\n      depthLoadOp: 'clear',\n      depthStoreOp: 'store',\n      stencilClearValue: 0,\n      stencilLoadOp: 'clear',\n      stencilStoreOp: 'store',\n    };\n  }\n\n  tryRenderPass(success: boolean, descriptor: GPURenderPassDescriptor): void {\n    const commandEncoder = this.device.createCommandEncoder();\n    const renderPass = commandEncoder.beginRenderPass(descriptor);\n    renderPass.end();\n\n    this.expectValidationError(() => {\n      commandEncoder.finish();\n    }, !success);\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('one_color_attachment')\n  .desc(`Test that a render pass works with only one color attachment.`)\n  .fn(t => {\n    const colorTexture = t.createTexture({ format: 'rgba8unorm' });\n    const descriptor = {\n      colorAttachments: [t.getColorAttachment(colorTexture)],\n    };\n\n    t.tryRenderPass(true, descriptor);\n  });\n\ng.test('one_depth_stencil_attachment')\n  .desc(`Test that a render pass works with only one depthStencil attachment.`)\n  .fn(t => {\n    const depthStencilTexture = t.createTexture({ format: 'depth24plus-stencil8' });\n    const descriptor = {\n      colorAttachments: [],\n      depthStencilAttachment: t.getDepthStencilAttachment(depthStencilTexture),\n    };\n\n    t.tryRenderPass(true, descriptor);\n  });\n\ng.test('color_attachments_empty')\n  .desc(\n    `\n  Test that when colorAttachments has all values be 'undefined' or the sequence is empty, the\n  depthStencilAttachment must not be 'undefined'.\n  `\n  )\n  .paramsSubcasesOnly(u =>\n    u\n      .combine('colorAttachments', [\n        [],\n        [undefined],\n        [undefined, undefined],\n        new Array(8).fill(undefined),\n        [{ format: 'rgba8unorm' }],\n      ])\n      .combine('hasDepthStencilAttachment', [false, true])\n  )\n  .fn(async t => {\n    const { colorAttachments, hasDepthStencilAttachment } = t.params;\n\n    let isEmptyColorTargets = true;\n    for (let i = 0; i < colorAttachments.length; i++) {\n      if (colorAttachments[i] !== undefined) {\n        isEmptyColorTargets = false;\n        const colorTexture = t.createTexture();\n        colorAttachments[i] = t.getColorAttachment(colorTexture);\n      }\n    }\n\n    const _success = !isEmptyColorTargets || hasDepthStencilAttachment;\n    t.tryRenderPass(_success, {\n      colorAttachments,\n      depthStencilAttachment: hasDepthStencilAttachment\n        ? t.getDepthStencilAttachment(t.createTexture({ format: 'depth24plus-stencil8' }))\n        : undefined,\n    });\n  });\n\ng.test('out_of_bounds_color_attachments')\n  .desc(\n    `\n  Test that the out of bound of color attachment indexes are handled.\n    - a validation error is generated when color attachments exceed the maximum limit(8).\n  `\n  )\n  .paramsSimple([\n    { colorAttachmentsCount: 8, _success: true }, // Control case\n    { colorAttachmentsCount: 9, _success: false }, // Out of bounds\n  ])\n  .fn(async t => {\n    const { colorAttachmentsCount, _success } = t.params;\n\n    const colorAttachments = [];\n    for (let i = 0; i < colorAttachmentsCount; i++) {\n      const colorTexture = t.createTexture();\n      colorAttachments.push(t.getColorAttachment(colorTexture));\n    }\n\n    t.tryRenderPass(_success, { colorAttachments });\n  });\n\ng.test('attachments_same_size')\n  .desc(\n    `\n  Test that attachments have the same size. Otherwise, a validation error should be generated.\n    - Succeed if all attachments have the same size.\n    - Fail if one of the color attachments has a different size.\n    - Fail if the depth stencil attachment has a different size.\n  `\n  )\n  .fn(async t => {\n    const colorTexture1x1A = t.createTexture({ width: 1, height: 1, format: 'rgba8unorm' });\n    const colorTexture1x1B = t.createTexture({ width: 1, height: 1, format: 'rgba8unorm' });\n    const colorTexture2x2 = t.createTexture({ width: 2, height: 2, format: 'rgba8unorm' });\n    const depthStencilTexture1x1 = t.createTexture({\n      width: 1,\n      height: 1,\n      format: 'depth24plus-stencil8',\n    });\n    const depthStencilTexture2x2 = t.createTexture({\n      width: 2,\n      height: 2,\n      format: 'depth24plus-stencil8',\n    });\n\n    {\n      // Control case: all the same size (1x1)\n      const descriptor: GPURenderPassDescriptor = {\n        colorAttachments: [\n          t.getColorAttachment(colorTexture1x1A),\n          t.getColorAttachment(colorTexture1x1B),\n        ],\n        depthStencilAttachment: t.getDepthStencilAttachment(depthStencilTexture1x1),\n      };\n\n      t.tryRenderPass(true, descriptor);\n    }\n    {\n      // One of the color attachments has a different size\n      const descriptor: GPURenderPassDescriptor = {\n        colorAttachments: [\n          t.getColorAttachment(colorTexture1x1A),\n          t.getColorAttachment(colorTexture2x2),\n        ],\n      };\n\n      t.tryRenderPass(false, descriptor);\n    }\n    {\n      // The depth stencil attachment has a different size\n      const descriptor: GPURenderPassDescriptor = {\n        colorAttachments: [\n          t.getColorAttachment(colorTexture1x1A),\n          t.getColorAttachment(colorTexture1x1B),\n        ],\n        depthStencilAttachment: t.getDepthStencilAttachment(depthStencilTexture2x2),\n      };\n\n      t.tryRenderPass(false, descriptor);\n    }\n  });\n\ng.test('attachments_must_match_whether_they_are_used_for_color_or_depth_stencil').fn(async t => {\n  const colorTexture = t.createTexture({ format: 'rgba8unorm' });\n  const depthStencilTexture = t.createTexture({ format: 'depth24plus-stencil8' });\n\n  {\n    // Using depth-stencil for color\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [t.getColorAttachment(depthStencilTexture)],\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n  {\n    // Using color for depth-stencil\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [],\n      depthStencilAttachment: t.getDepthStencilAttachment(colorTexture),\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n});\n\ng.test('check_layer_count_for_color_or_depth_stencil')\n  .paramsSimple([\n    { arrayLayerCount: 5, baseArrayLayer: 0, _success: false }, // using 2D array texture view with arrayLayerCount > 1 is not allowed\n    { arrayLayerCount: 1, baseArrayLayer: 0, _success: true }, // using 2D array texture view that covers the first layer of the texture is OK\n    { arrayLayerCount: 1, baseArrayLayer: 9, _success: true }, // using 2D array texture view that covers the last layer is OK for depth stencil\n  ])\n  .fn(async t => {\n    const { arrayLayerCount, baseArrayLayer, _success } = t.params;\n\n    const ARRAY_LAYER_COUNT = 10;\n    const MIP_LEVEL_COUNT = 1;\n    const COLOR_FORMAT = 'rgba8unorm';\n    const DEPTH_STENCIL_FORMAT = 'depth24plus-stencil8';\n\n    const colorTexture = t.createTexture({\n      format: COLOR_FORMAT,\n      width: 32,\n      height: 32,\n      mipLevelCount: MIP_LEVEL_COUNT,\n      arrayLayerCount: ARRAY_LAYER_COUNT,\n    });\n    const depthStencilTexture = t.createTexture({\n      format: DEPTH_STENCIL_FORMAT,\n      width: 32,\n      height: 32,\n      mipLevelCount: MIP_LEVEL_COUNT,\n      arrayLayerCount: ARRAY_LAYER_COUNT,\n    });\n\n    const baseTextureViewDescriptor: GPUTextureViewDescriptor = {\n      dimension: '2d-array',\n      baseArrayLayer,\n      arrayLayerCount,\n      baseMipLevel: 0,\n      mipLevelCount: MIP_LEVEL_COUNT,\n    };\n\n    {\n      // Check 2D array texture view for color\n      const textureViewDescriptor: GPUTextureViewDescriptor = {\n        ...baseTextureViewDescriptor,\n        format: COLOR_FORMAT,\n      };\n\n      const descriptor: GPURenderPassDescriptor = {\n        colorAttachments: [t.getColorAttachment(colorTexture, textureViewDescriptor)],\n      };\n\n      t.tryRenderPass(_success, descriptor);\n    }\n    {\n      // Check 2D array texture view for depth stencil\n      const textureViewDescriptor: GPUTextureViewDescriptor = {\n        ...baseTextureViewDescriptor,\n        format: DEPTH_STENCIL_FORMAT,\n      };\n\n      const descriptor: GPURenderPassDescriptor = {\n        colorAttachments: [],\n        depthStencilAttachment: t.getDepthStencilAttachment(\n          depthStencilTexture,\n          textureViewDescriptor\n        ),\n      };\n\n      t.tryRenderPass(_success, descriptor);\n    }\n  });\n\ng.test('check_mip_level_count_for_color_or_depth_stencil')\n  .paramsSimple([\n    { mipLevelCount: 2, baseMipLevel: 0, _success: false }, // using 2D texture view with mipLevelCount > 1 is not allowed\n    { mipLevelCount: 1, baseMipLevel: 0, _success: true }, // using 2D texture view that covers the first level of the texture is OK\n    { mipLevelCount: 1, baseMipLevel: 3, _success: true }, // using 2D texture view that covers the last level of the texture is OK\n  ])\n  .fn(async t => {\n    const { mipLevelCount, baseMipLevel, _success } = t.params;\n\n    const ARRAY_LAYER_COUNT = 1;\n    const MIP_LEVEL_COUNT = 4;\n    const COLOR_FORMAT = 'rgba8unorm';\n    const DEPTH_STENCIL_FORMAT = 'depth24plus-stencil8';\n\n    const colorTexture = t.createTexture({\n      format: COLOR_FORMAT,\n      width: 32,\n      height: 32,\n      mipLevelCount: MIP_LEVEL_COUNT,\n      arrayLayerCount: ARRAY_LAYER_COUNT,\n    });\n    const depthStencilTexture = t.createTexture({\n      format: DEPTH_STENCIL_FORMAT,\n      width: 32,\n      height: 32,\n      mipLevelCount: MIP_LEVEL_COUNT,\n      arrayLayerCount: ARRAY_LAYER_COUNT,\n    });\n\n    const baseTextureViewDescriptor: GPUTextureViewDescriptor = {\n      dimension: '2d',\n      baseArrayLayer: 0,\n      arrayLayerCount: ARRAY_LAYER_COUNT,\n      baseMipLevel,\n      mipLevelCount,\n    };\n\n    {\n      // Check 2D texture view for color\n      const textureViewDescriptor: GPUTextureViewDescriptor = {\n        ...baseTextureViewDescriptor,\n        format: COLOR_FORMAT,\n      };\n\n      const descriptor: GPURenderPassDescriptor = {\n        colorAttachments: [t.getColorAttachment(colorTexture, textureViewDescriptor)],\n      };\n\n      t.tryRenderPass(_success, descriptor);\n    }\n    {\n      // Check 2D texture view for depth stencil\n      const textureViewDescriptor: GPUTextureViewDescriptor = {\n        ...baseTextureViewDescriptor,\n        format: DEPTH_STENCIL_FORMAT,\n      };\n\n      const descriptor: GPURenderPassDescriptor = {\n        colorAttachments: [],\n        depthStencilAttachment: t.getDepthStencilAttachment(\n          depthStencilTexture,\n          textureViewDescriptor\n        ),\n      };\n\n      t.tryRenderPass(_success, descriptor);\n    }\n  });\n\ng.test('it_is_invalid_to_set_resolve_target_if_color_attachment_is_non_multisampled').fn(\n  async t => {\n    const colorTexture = t.createTexture({ sampleCount: 1 });\n    const resolveTargetTexture = t.createTexture({ sampleCount: 1 });\n\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [\n        {\n          view: colorTexture.createView(),\n          resolveTarget: resolveTargetTexture.createView(),\n          clearValue: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 },\n          loadOp: 'clear',\n          storeOp: 'store',\n        },\n      ],\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n);\n\ng.test('check_the_use_of_multisampled_textures_as_color_attachments').fn(async t => {\n  const colorTexture = t.createTexture({ sampleCount: 1 });\n  const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n\n  {\n    // It is allowed to use a multisampled color attachment without setting resolve target\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [t.getColorAttachment(multisampledColorTexture)],\n    };\n    t.tryRenderPass(true, descriptor);\n  }\n  {\n    // It is not allowed to use multiple color attachments with different sample counts\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [\n        t.getColorAttachment(colorTexture),\n        t.getColorAttachment(multisampledColorTexture),\n      ],\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n});\n\ng.test('it_is_invalid_to_use_a_multisampled_resolve_target').fn(async t => {\n  const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n  const multisampledResolveTargetTexture = t.createTexture({ sampleCount: 4 });\n\n  const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n  colorAttachment.resolveTarget = multisampledResolveTargetTexture.createView();\n\n  const descriptor: GPURenderPassDescriptor = {\n    colorAttachments: [colorAttachment],\n  };\n\n  t.tryRenderPass(false, descriptor);\n});\n\ng.test('it_is_invalid_to_use_a_resolve_target_with_array_layer_count_greater_than_1').fn(\n  async t => {\n    const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n    const resolveTargetTexture = t.createTexture({ arrayLayerCount: 2 });\n\n    const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n    colorAttachment.resolveTarget = resolveTargetTexture.createView({ dimension: '2d-array' });\n\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [colorAttachment],\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n);\n\ng.test('it_is_invalid_to_use_a_resolve_target_with_mipmap_level_count_greater_than_1').fn(\n  async t => {\n    const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n    const resolveTargetTexture = t.createTexture({ mipLevelCount: 2 });\n\n    const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n    colorAttachment.resolveTarget = resolveTargetTexture.createView();\n\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [colorAttachment],\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n);\n\ng.test('it_is_invalid_to_use_a_resolve_target_whose_usage_is_not_RENDER_ATTACHMENT').fn(async t => {\n  const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n  const resolveTargetTexture = t.createTexture({\n    usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.COPY_DST,\n  });\n\n  const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n  colorAttachment.resolveTarget = resolveTargetTexture.createView();\n\n  const descriptor: GPURenderPassDescriptor = {\n    colorAttachments: [colorAttachment],\n  };\n\n  t.tryRenderPass(false, descriptor);\n});\n\ng.test('it_is_invalid_to_use_a_resolve_target_in_error_state').fn(async t => {\n  const ARRAY_LAYER_COUNT = 1;\n\n  const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n  const resolveTargetTexture = t.createTexture({ arrayLayerCount: ARRAY_LAYER_COUNT });\n\n  const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n  t.expectValidationError(() => {\n    colorAttachment.resolveTarget = resolveTargetTexture.createView({\n      dimension: '2d',\n      format: 'rgba8unorm',\n      baseArrayLayer: ARRAY_LAYER_COUNT + 1,\n    });\n  });\n\n  const descriptor: GPURenderPassDescriptor = {\n    colorAttachments: [colorAttachment],\n  };\n\n  t.tryRenderPass(false, descriptor);\n});\n\ng.test('use_of_multisampled_attachment_and_non_multisampled_resolve_target_is_allowed').fn(\n  async t => {\n    const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n    const resolveTargetTexture = t.createTexture({ sampleCount: 1 });\n\n    const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n    colorAttachment.resolveTarget = resolveTargetTexture.createView();\n\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [colorAttachment],\n    };\n\n    t.tryRenderPass(true, descriptor);\n  }\n);\n\ng.test('use_a_resolve_target_in_a_format_different_than_the_attachment_is_not_allowed').fn(\n  async t => {\n    const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n    const resolveTargetTexture = t.createTexture({ format: 'bgra8unorm' });\n\n    const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n    colorAttachment.resolveTarget = resolveTargetTexture.createView();\n\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [colorAttachment],\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n);\n\ng.test('size_of_the_resolve_target_must_be_the_same_as_the_color_attachment').fn(async t => {\n  const size = 16;\n  const multisampledColorTexture = t.createTexture({ width: size, height: size, sampleCount: 4 });\n  const resolveTargetTexture = t.createTexture({\n    width: size * 2,\n    height: size * 2,\n    mipLevelCount: 2,\n  });\n\n  {\n    const resolveTargetTextureView = resolveTargetTexture.createView({\n      baseMipLevel: 0,\n      mipLevelCount: 1,\n    });\n\n    const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n    colorAttachment.resolveTarget = resolveTargetTextureView;\n\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [colorAttachment],\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n  {\n    const resolveTargetTextureView = resolveTargetTexture.createView({ baseMipLevel: 1 });\n\n    const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n    colorAttachment.resolveTarget = resolveTargetTextureView;\n\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [colorAttachment],\n    };\n\n    t.tryRenderPass(true, descriptor);\n  }\n});\n\ng.test('check_depth_stencil_attachment_sample_counts_mismatch').fn(async t => {\n  const multisampledDepthStencilTexture = t.createTexture({\n    sampleCount: 4,\n    format: 'depth24plus-stencil8',\n  });\n\n  {\n    // It is not allowed to use a depth stencil attachment whose sample count is different from the\n    // one of the color attachment\n    const depthStencilTexture = t.createTexture({\n      sampleCount: 1,\n      format: 'depth24plus-stencil8',\n    });\n    const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [t.getColorAttachment(multisampledColorTexture)],\n      depthStencilAttachment: t.getDepthStencilAttachment(depthStencilTexture),\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n  {\n    const colorTexture = t.createTexture({ sampleCount: 1 });\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [t.getColorAttachment(colorTexture)],\n      depthStencilAttachment: t.getDepthStencilAttachment(multisampledDepthStencilTexture),\n    };\n\n    t.tryRenderPass(false, descriptor);\n  }\n  {\n    // It is allowed to use a multisampled depth stencil attachment whose sample count is equal to\n    // the one of the color attachment.\n    const multisampledColorTexture = t.createTexture({ sampleCount: 4 });\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [t.getColorAttachment(multisampledColorTexture)],\n      depthStencilAttachment: t.getDepthStencilAttachment(multisampledDepthStencilTexture),\n    };\n\n    t.tryRenderPass(true, descriptor);\n  }\n  {\n    // It is allowed to use a multisampled depth stencil attachment with no color attachment\n    const descriptor: GPURenderPassDescriptor = {\n      colorAttachments: [],\n      depthStencilAttachment: t.getDepthStencilAttachment(multisampledDepthStencilTexture),\n    };\n\n    t.tryRenderPass(true, descriptor);\n  }\n});\n\ng.test('depth_stencil_attachment')\n  .desc(\n    `\n  Test GPURenderPassDepthStencilAttachment Usage:\n  - depthReadOnly and stencilReadOnly must match if the format is a combined depth-stencil format.\n  - depthLoadOp and depthStoreOp must be provided iff the format has a depth aspect and depthReadOnly is not true.\n  - stencilLoadOp and stencilStoreOp must be provided iff the format has a stencil aspect and stencilReadOnly is not true.\n  `\n  )\n  .params(u =>\n    u //\n      .combine('format', kDepthStencilFormats)\n      .beginSubcases()\n      .combine('depthReadOnly', [false, true])\n      .combine('stencilReadOnly', [false, true])\n      .combine('setDepthLoadStoreOp', [false, true])\n      .combine('setStencilLoadStoreOp', [false, true])\n  )\n  .beforeAllSubcases(t => {\n    t.selectDeviceForTextureFormatOrSkipTestCase(t.params.format);\n  })\n  .fn(async t => {\n    const {\n      format,\n      depthReadOnly,\n      stencilReadOnly,\n      setDepthLoadStoreOp,\n      setStencilLoadStoreOp,\n    } = t.params;\n\n    let isValid = true;\n    const info = kTextureFormatInfo[format];\n    if (info.depth && info.stencil) {\n      isValid &&= depthReadOnly === stencilReadOnly;\n    }\n\n    if (info.depth && !depthReadOnly) {\n      isValid &&= setDepthLoadStoreOp;\n    } else {\n      isValid &&= !setDepthLoadStoreOp;\n    }\n\n    if (info.stencil && !stencilReadOnly) {\n      isValid &&= setStencilLoadStoreOp;\n    } else {\n      isValid &&= !setStencilLoadStoreOp;\n    }\n\n    const depthStencilAttachment: GPURenderPassDepthStencilAttachment = {\n      view: t.createTexture({ format }).createView(),\n      depthReadOnly,\n      stencilReadOnly,\n    };\n\n    if (setDepthLoadStoreOp) {\n      depthStencilAttachment.depthLoadOp = 'clear';\n      depthStencilAttachment.depthStoreOp = 'store';\n    }\n    if (setStencilLoadStoreOp) {\n      depthStencilAttachment.stencilLoadOp = 'clear';\n      depthStencilAttachment.stencilStoreOp = 'store';\n    }\n\n    const descriptor = {\n      colorAttachments: [t.getColorAttachment(t.createTexture())],\n      depthStencilAttachment,\n    };\n\n    t.tryRenderPass(isValid, descriptor);\n  });\n\ng.test('depth_stencil_attachment,depth_clear_value')\n  .desc(\n    `\n  Test that depthClearValue is invalid if the value is out of the range(0.0 and 1.0) when\n  depthLoadOp is 'clear'.\n  `\n  )\n  .paramsSimple([\n    { depthClearValue: -1.0 },\n    { depthClearValue: 0.0 },\n    { depthClearValue: 0.5 },\n    { depthClearValue: 1.0 },\n    { depthClearValue: 1.5 },\n  ])\n  .fn(t => {\n    const { depthClearValue } = t.params;\n\n    const depthStencilTexture = t.createTexture({ format: 'depth24plus-stencil8' });\n    const depthStencilAttachment = t.getDepthStencilAttachment(depthStencilTexture);\n    depthStencilAttachment.depthClearValue = depthClearValue;\n\n    const descriptor = {\n      colorAttachments: [t.getColorAttachment(t.createTexture())],\n      depthStencilAttachment,\n    };\n\n    t.tryRenderPass(depthClearValue >= 0.0 && depthClearValue <= 1.0, descriptor);\n  });\n\ng.test('multisample_render_target_formats_support_resolve')\n  .params(u =>\n    u\n      .combine('format', kRenderableColorTextureFormats)\n      .filter(t => kTextureFormatInfo[t.format].multisample)\n  )\n  .fn(async t => {\n    const { format } = t.params;\n    const multisampledColorTexture = t.createTexture({ format, sampleCount: 4 });\n    const resolveTarget = t.createTexture({ format });\n\n    const colorAttachment = t.getColorAttachment(multisampledColorTexture);\n    colorAttachment.resolveTarget = resolveTarget.createView();\n\n    t.tryRenderPass(kTextureFormatInfo[format].resolve, {\n      colorAttachments: [colorAttachment],\n    });\n  });\n\ng.test('timestamp_writes_location')\n  .desc('Test that entries in timestampWrites do not have the same location.')\n  .params(u =>\n    u //\n      .combine('locationA', ['beginning', 'end'] as const)\n      .combine('locationB', ['beginning', 'end'] as const)\n  )\n  .beforeAllSubcases(t => {\n    t.selectDeviceOrSkipTestCase(['timestamp-query']);\n  })\n  .fn(async t => {\n    const { locationA, locationB } = t.params;\n\n    const querySet = t.device.createQuerySet({\n      type: 'timestamp',\n      count: 1,\n    });\n\n    const timestampWriteA = {\n      querySet,\n      queryIndex: 0,\n      location: locationA,\n    };\n\n    const timestampWriteB = {\n      querySet,\n      queryIndex: 1,\n      location: locationB,\n    };\n\n    const isValid = locationA !== locationB;\n\n    const colorTexture = t.createTexture({ format: 'rgba8unorm' });\n    const descriptor = {\n      colorAttachments: [t.getColorAttachment(colorTexture)],\n      timestampWrites: [timestampWriteA, timestampWriteB],\n    };\n\n    t.tryRenderPass(isValid, descriptor);\n  });\n"],"file":"render_pass_descriptor.spec.js"}