{"version":3,"sources":["../../../../../../../src/webgpu/shader/execution/expression/call/builtin/dot.spec.ts"],"names":["description","makeTestGroup","GPUTest","TypeF32","TypeVec","dotInterval","vectorTestValues","makeCaseCache","allInputSources","makeVectorPairToF32IntervalCase","run","builtin","g","d","f32_vec2","makeCase","x","y","flatMap","i","map","j","f32_vec3","f32_vec4","test","specURL","desc","params","u","combine","unimplemented","fn","t","cases","get"],"mappings":"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","sourcesContent":["export const description = `\nExecution tests for the 'dot' builtin function\n\nT is AbstractInt, AbstractFloat, i32, u32, f32, or f16\n@const fn dot(e1: vecN<T>,e2: vecN<T>) -> T\nReturns the dot product of e1 and e2.\n\n`;\n\nimport { makeTestGroup } from '../../../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../../../gpu_test.js';\nimport { TypeF32, TypeVec } from '../../../../../util/conversion.js';\nimport { dotInterval } from '../../../../../util/f32_interval.js';\nimport { vectorTestValues } from '../../../../../util/math.js';\nimport { makeCaseCache } from '../../case_cache.js';\nimport { allInputSources, Case, makeVectorPairToF32IntervalCase, run } from '../../expression.js';\n\nimport { builtin } from './builtin.js';\n\nexport const g = makeTestGroup(GPUTest);\n\nexport const d = makeCaseCache('dot', {\n  f32_vec2: () => {\n    const makeCase = (x: number[], y: number[]): Case => {\n      return makeVectorPairToF32IntervalCase(x, y, dotInterval);\n    };\n\n    return vectorTestValues(2, false).flatMap(i => {\n      return vectorTestValues(2, false).map(j => {\n        return makeCase(i, j);\n      });\n    });\n  },\n  f32_vec3: () => {\n    const makeCase = (x: number[], y: number[]): Case => {\n      return makeVectorPairToF32IntervalCase(x, y, dotInterval);\n    };\n\n    return vectorTestValues(3, false).flatMap(i => {\n      return vectorTestValues(3, false).map(j => {\n        return makeCase(i, j);\n      });\n    });\n  },\n  f32_vec4: () => {\n    const makeCase = (x: number[], y: number[]): Case => {\n      return makeVectorPairToF32IntervalCase(x, y, dotInterval);\n    };\n\n    return vectorTestValues(4, false).flatMap(i => {\n      return vectorTestValues(4, false).map(j => {\n        return makeCase(i, j);\n      });\n    });\n  },\n});\n\ng.test('abstract_int')\n  .specURL('https://www.w3.org/TR/WGSL/#vector-builtin-functions')\n  .desc(`abstract int tests`)\n  .params(u => u.combine('inputSource', allInputSources))\n  .unimplemented();\n\ng.test('i32')\n  .specURL('https://www.w3.org/TR/WGSL/#vector-builtin-functions')\n  .desc(`i32 tests`)\n  .params(u => u.combine('inputSource', allInputSources))\n  .unimplemented();\n\ng.test('u32')\n  .specURL('https://www.w3.org/TR/WGSL/#vector-builtin-functions')\n  .desc(`u32 tests`)\n  .params(u => u.combine('inputSource', allInputSources))\n  .unimplemented();\n\ng.test('abstract_float')\n  .specURL('https://www.w3.org/TR/WGSL/#vector-builtin-functions')\n  .desc(`abstract float test`)\n  .params(u => u.combine('inputSource', allInputSources))\n  .unimplemented();\n\ng.test('f32_vec2')\n  .specURL('https://www.w3.org/TR/WGSL/#vector-builtin-functions')\n  .desc(`f32 tests using vec2s`)\n  .params(u => u.combine('inputSource', allInputSources))\n  .fn(async t => {\n    const cases = await d.get('f32_vec2');\n    await run(\n      t,\n      builtin('dot'),\n      [TypeVec(2, TypeF32), TypeVec(2, TypeF32)],\n      TypeF32,\n      t.params,\n      cases\n    );\n  });\n\ng.test('f32_vec3')\n  .specURL('https://www.w3.org/TR/WGSL/#vector-builtin-functions')\n  .desc(`f32 tests using vec3s`)\n  .params(u => u.combine('inputSource', allInputSources))\n  .fn(async t => {\n    const cases = await d.get('f32_vec3');\n    await run(\n      t,\n      builtin('dot'),\n      [TypeVec(3, TypeF32), TypeVec(3, TypeF32)],\n      TypeF32,\n      t.params,\n      cases\n    );\n  });\n\ng.test('f32_vec4')\n  .specURL('https://www.w3.org/TR/WGSL/#vector-builtin-functions')\n  .desc(`f32 tests using vec4s`)\n  .params(u => u.combine('inputSource', allInputSources))\n  .fn(async t => {\n    const cases = await d.get('f32_vec4');\n    await run(\n      t,\n      builtin('dot'),\n      [TypeVec(4, TypeF32), TypeVec(4, TypeF32)],\n      TypeF32,\n      t.params,\n      cases\n    );\n  });\n\ng.test('f16')\n  .specURL('https://www.w3.org/TR/WGSL/#vector-builtin-functions')\n  .desc(`f16 tests`)\n  .params(u => u.combine('inputSource', allInputSources))\n  .unimplemented();\n"],"file":"dot.spec.js"}