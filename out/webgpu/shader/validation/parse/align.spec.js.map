{"version":3,"sources":["../../../../../src/webgpu/shader/validation/parse/align.spec.ts"],"names":["description","makeTestGroup","ShaderValidationTest","g","kValidAlign","Set","kInvalidAlign","test","desc","params","u","beginSubcases","combine","fn","t","v","align","replace","code","expectCompileResult","has"],"mappings":";AAAA;AACA,GADA,OAAO,MAAMA,WAAW,GAAI,6BAArB,CAEP,SAASC,aAAT,QAA8B,4CAA9B;AACA,SAASC,oBAAT,QAAqC,8BAArC;;AAEA,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,oBAAD,CAAvB;;AAEP,MAAME,WAAW,GAAG,IAAIC,GAAJ,CAAQ;AAC1B,EAD0B;AAE1B,WAF0B;AAG1B,WAH0B;AAI1B,YAJ0B;AAK1B,aAL0B;AAM1B,oBAN0B;AAO1B,eAP0B;AAQ1B,iCAR0B,CAAR,CAApB;;AAUA,MAAMC,aAAa,GAAG,IAAID,GAAJ,CAAQ;AAC5B,YAD4B;AAE5B,UAF4B;AAG5B,WAH4B;AAI5B,UAJ4B;AAK5B,cAL4B;AAM5B,YAN4B;AAO5B,WAP4B,EAOf;AACb,aAR4B;AAS5B,aAT4B;AAU5B,YAV4B;AAW5B,YAX4B;AAY5B,YAZ4B;AAa5B,YAb4B;AAc5B,QAd4B;AAe5B,WAf4B;AAgB5B,YAhB4B;AAiB5B,oBAjB4B,EAiBN;AACtB,oBAlB4B,CAkBN;AAlBM,CAAR,CAAtB;;AAqBAF,CAAC,CAACI,IAAF,CAAO,mCAAP;AACGC,IADH,CACS,uCADT;AAEGC,MAFH,CAEU,CAAAC,CAAC,KAAIA,CAAC,CAACC,aAAF,GAAkBC,OAAlB,CAA0B,OAA1B,EAAmC,IAAIP,GAAJ,CAAQ,CAAC,GAAGD,WAAJ,EAAiB,GAAGE,aAApB,CAAR,CAAnC,CAFf;AAGGO,EAHH,CAGM,CAAAC,CAAC,KAAI;AACP,QAAMC,CAAC,GAAGD,CAAC,CAACL,MAAF,CAASO,KAAT,CAAeC,OAAf,CAAuB,KAAvB,EAA8B,GAA9B,CAAV;AACA,QAAMC,IAAI,GAAI;AAClB;AACA;AACA,IAAIH,CAAE;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAZI;AAaAD,EAAAA,CAAC,CAACK,mBAAF,CAAsBf,WAAW,CAACgB,GAAZ,CAAgBN,CAAC,CAACL,MAAF,CAASO,KAAzB,CAAtB,EAAuDE,IAAvD;AACD,CAnBH","sourcesContent":["export const description = `Validation tests for @align`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kValidAlign = new Set([\n  '',\n  '@align(1)',\n  '@align(4)',\n  '@align(4i)',\n  '@align(0x4)',\n  '@align(1073741824)',\n  '@\\talign\\t(4)',\n  '@/^comment^/align/^comment^/(4)',\n]);\nconst kInvalidAlign = new Set([\n  '@malign(4)',\n  '@align()',\n  '@align 4)',\n  '@align(4',\n  '@align(4, 2)',\n  '@align(4,)',\n  '@align(3)', // Not a power of 2\n  '@align(val)',\n  '@align(1.0)',\n  '@align(4u)',\n  '@align(4f)',\n  '@align(4h)',\n  '@align(4,)',\n  '@align',\n  '@align(0)',\n  '@align(-4)',\n  '@align(2147483646)', // Not a power of 2\n  '@align(2147483648)', // Larger then max i32\n]);\n\ng.test('missing_attribute_on_param_struct')\n  .desc(`Test that @align is parsed correctly.`)\n  .params(u => u.beginSubcases().combine('align', new Set([...kValidAlign, ...kInvalidAlign])))\n  .fn(t => {\n    const v = t.params.align.replace(/\\^/g, '*');\n    const code = `\nconst val: i32 = 4;\nstruct B {\n  ${v} a: i32,\n}\n\n@group(0) @binding(0)\nvar<uniform> uniform_buffer: B;\n\n@fragment\nfn main() -> @location(0) vec4<f32> {\n  return vec4<f32>(.4, .2, .3, .1);\n}`;\n    t.expectCompileResult(kValidAlign.has(t.params.align), code);\n  });\n"],"file":"align.spec.js"}