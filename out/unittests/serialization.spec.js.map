{"version":3,"sources":["../../src/unittests/serialization.spec.ts"],"names":["description","getIsBuildingDataCache","setIsBuildingDataCache","makeTestGroup","objectEquals","deserializeExpectation","serializeExpectation","anyOf","deserializeComparator","kValue","bool","deserializeValue","f16","f32","i16","i32","i8","serializeValue","u16","u32","u8","vec2","vec3","vec4","deserializeF32Interval","F32Interval","serializeF32Interval","UnitTest","g","test","fn","t","value","min","max","negative","positive","subnormal","infinity","serialized","deserialized","expect","interval","expectation","enableBuildingDataCache","f","wasBuildingDataCache","c","comparator","testCases","val","got","matched"],"mappings":"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","sourcesContent":["export const description = `Unit tests for data cache serialization`;\n\nimport { getIsBuildingDataCache, setIsBuildingDataCache } from '../common/framework/data_cache.js';\nimport { makeTestGroup } from '../common/internal/test_group.js';\nimport { objectEquals } from '../common/util/util.js';\nimport {\n  deserializeExpectation,\n  serializeExpectation,\n} from '../webgpu/shader/execution/expression/case_cache.js';\nimport { anyOf, deserializeComparator, SerializedComparator } from '../webgpu/util/compare.js';\nimport { kValue } from '../webgpu/util/constants.js';\nimport {\n  bool,\n  deserializeValue,\n  f16,\n  f32,\n  i16,\n  i32,\n  i8,\n  serializeValue,\n  u16,\n  u32,\n  u8,\n  vec2,\n  vec3,\n  vec4,\n} from '../webgpu/util/conversion.js';\nimport {\n  deserializeF32Interval,\n  F32Interval,\n  serializeF32Interval,\n} from '../webgpu/util/f32_interval.js';\n\nimport { UnitTest } from './unit_test.js';\n\nexport const g = makeTestGroup(UnitTest);\n\ng.test('value').fn(t => {\n  for (const value of [\n    u32(kValue.u32.min + 0),\n    u32(kValue.u32.min + 1),\n    u32(kValue.u32.min + 2),\n    u32(kValue.u32.max - 2),\n    u32(kValue.u32.max - 1),\n    u32(kValue.u32.max - 0),\n\n    u16(kValue.u16.min + 0),\n    u16(kValue.u16.min + 1),\n    u16(kValue.u16.min + 2),\n    u16(kValue.u16.max - 2),\n    u16(kValue.u16.max - 1),\n    u16(kValue.u16.max - 0),\n\n    u8(kValue.u8.min + 0),\n    u8(kValue.u8.min + 1),\n    u8(kValue.u8.min + 2),\n    u8(kValue.u8.max - 2),\n    u8(kValue.u8.max - 1),\n    u8(kValue.u8.max - 0),\n\n    i32(kValue.i32.negative.min + 0),\n    i32(kValue.i32.negative.min + 1),\n    i32(kValue.i32.negative.min + 2),\n    i32(kValue.i32.negative.max - 2),\n    i32(kValue.i32.negative.max - 1),\n    i32(kValue.i32.positive.min - 0),\n    i32(kValue.i32.positive.min + 1),\n    i32(kValue.i32.positive.min + 2),\n    i32(kValue.i32.positive.max - 2),\n    i32(kValue.i32.positive.max - 1),\n    i32(kValue.i32.positive.max - 0),\n\n    i16(kValue.i16.negative.min + 0),\n    i16(kValue.i16.negative.min + 1),\n    i16(kValue.i16.negative.min + 2),\n    i16(kValue.i16.negative.max - 2),\n    i16(kValue.i16.negative.max - 1),\n    i16(kValue.i16.positive.min + 0),\n    i16(kValue.i16.positive.min + 1),\n    i16(kValue.i16.positive.min + 2),\n    i16(kValue.i16.positive.max - 2),\n    i16(kValue.i16.positive.max - 1),\n    i16(kValue.i16.positive.max - 0),\n\n    i8(kValue.i8.negative.min + 0),\n    i8(kValue.i8.negative.min + 1),\n    i8(kValue.i8.negative.min + 2),\n    i8(kValue.i8.negative.max - 2),\n    i8(kValue.i8.negative.max - 1),\n    i8(kValue.i8.positive.min + 0),\n    i8(kValue.i8.positive.min + 1),\n    i8(kValue.i8.positive.min + 2),\n    i8(kValue.i8.positive.max - 2),\n    i8(kValue.i8.positive.max - 1),\n    i8(kValue.i8.positive.max - 0),\n\n    f32(0),\n    f32(-0),\n    f32(1),\n    f32(-1),\n    f32(0.5),\n    f32(-0.5),\n    f32(kValue.f32.positive.max),\n    f32(kValue.f32.positive.min),\n    f32(kValue.f32.subnormal.positive.max),\n    f32(kValue.f32.subnormal.positive.min),\n    f32(kValue.f32.subnormal.negative.max),\n    f32(kValue.f32.subnormal.negative.min),\n    f32(kValue.f32.infinity.positive),\n    f32(kValue.f32.infinity.negative),\n\n    f16(0),\n    f16(-0),\n    f16(1),\n    f16(-1),\n    f16(0.5),\n    f16(-0.5),\n    f16(kValue.f32.positive.max),\n    f16(kValue.f32.positive.min),\n    f16(kValue.f32.subnormal.positive.max),\n    f16(kValue.f32.subnormal.positive.min),\n    f16(kValue.f32.subnormal.negative.max),\n    f16(kValue.f32.subnormal.negative.min),\n    f16(kValue.f32.infinity.positive),\n    f16(kValue.f32.infinity.negative),\n\n    bool(true),\n    bool(false),\n\n    vec2(f32(1), f32(2)),\n    vec3(u32(1), u32(2), u32(3)),\n    vec4(bool(false), bool(true), bool(false), bool(true)),\n  ]) {\n    const serialized = serializeValue(value);\n    const deserialized = deserializeValue(serialized);\n    t.expect(\n      objectEquals(value, deserialized),\n      `value ${value} -> serialize -> deserialize -> ${deserialized}`\n    );\n  }\n});\n\ng.test('f32_interval').fn(t => {\n  for (const interval of [\n    new F32Interval(0),\n    new F32Interval(-0),\n    new F32Interval(1),\n    new F32Interval(-1),\n    new F32Interval(0.5),\n    new F32Interval(-0.5),\n    new F32Interval(kValue.f32.positive.max),\n    new F32Interval(kValue.f32.positive.min),\n    new F32Interval(kValue.f32.subnormal.positive.max),\n    new F32Interval(kValue.f32.subnormal.positive.min),\n    new F32Interval(kValue.f32.subnormal.negative.max),\n    new F32Interval(kValue.f32.subnormal.negative.min),\n    new F32Interval(kValue.f32.infinity.positive),\n    new F32Interval(kValue.f32.infinity.negative),\n\n    new F32Interval(-0, 0),\n    new F32Interval(-1, 1),\n    new F32Interval(-0.5, 0.5),\n    new F32Interval(kValue.f32.positive.min, kValue.f32.positive.max),\n    new F32Interval(kValue.f32.subnormal.positive.min, kValue.f32.subnormal.positive.max),\n    new F32Interval(kValue.f32.subnormal.negative.min, kValue.f32.subnormal.negative.max),\n    new F32Interval(kValue.f32.infinity.negative, kValue.f32.infinity.positive),\n  ]) {\n    const serialized = serializeF32Interval(interval);\n    const deserialized = deserializeF32Interval(serialized);\n    t.expect(\n      objectEquals(interval, deserialized),\n      `interval ${interval} -> serialize -> deserialize -> ${deserialized}`\n    );\n  }\n});\n\ng.test('expression_expectation').fn(t => {\n  for (const expectation of [\n    // Value\n    f32(123),\n    vec2(f32(1), f32(2)),\n    // Interval\n    new F32Interval(-0.5, 0.5),\n    new F32Interval(kValue.f32.positive.min, kValue.f32.positive.max),\n    // Intervals\n    [new F32Interval(-8.0, 0.5), new F32Interval(2.0, 4.0)],\n  ]) {\n    const serialized = serializeExpectation(expectation);\n    const deserialized = deserializeExpectation(serialized);\n    t.expect(\n      objectEquals(expectation, deserialized),\n      `expectation ${expectation} -> serialize -> deserialize -> ${deserialized}`\n    );\n  }\n});\n\n/**\n * Temporarily enabled building of the data cache.\n * Required for Comparators to serialize.\n */\nfunction enableBuildingDataCache(f: () => void) {\n  const wasBuildingDataCache = getIsBuildingDataCache();\n  setIsBuildingDataCache(true);\n  f();\n  setIsBuildingDataCache(wasBuildingDataCache);\n}\n\ng.test('anyOf').fn(t => {\n  enableBuildingDataCache(() => {\n    for (const c of [\n      {\n        comparator: anyOf(i32(123)),\n        testCases: [f32(0), f32(10), f32(122), f32(123), f32(124), f32(200)],\n      },\n    ]) {\n      const serialized = c.comparator as SerializedComparator;\n      const deserialized = deserializeComparator(serialized);\n      for (const val of c.testCases) {\n        const got = deserialized(val);\n        const expect = c.comparator(val);\n        t.expect(\n          got.matched === expect.matched,\n          `comparator(${val}): got: ${expect.matched}, expect: ${got.matched}`\n        );\n      }\n    }\n  });\n});\n"],"file":"serialization.spec.js"}